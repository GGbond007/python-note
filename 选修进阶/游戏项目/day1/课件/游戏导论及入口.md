1. 麻将项目学习方法(文档+代码配套使用的建议)
a. 先看文档,对相应章节内容有一个宏观的认识
b. 阅读项目代码,大体看下项目代码如何实现
c. 对照文档,深入理解项目功能实现

2. 学习目标
a. 学完后快速实现一款地方麻将
b. 学会如何理解全新的项目(该领域甚至可能是你完全没有接触过), 添加新功能, 调试跟踪bug

3. 项目学习步骤:
a. 先看项目|产品的效果, 访问网站|体验app|接口文档...
b. 看产品需求文档|策划文档  --- 宏观认识,不要过于深究细节
c. 了解下项目中用到了哪些你不知道的重要新技术(该游戏中firefly游戏引擎/tornado框架), 网络搜索学习 --- 宏观认识
d. 拉下代码,把代码运行起来
e. ...


4. 麻将代码
echecs: 麻将主体代码(游戏引擎)
echecs_web_services: 麻将配套的web服务(tornado)
tpmj_new: 麻将客户端原生代码

5. web开发/游戏开发/app开发比较
web server: http/https请求, 客户端发起请求,服务端响应, 单向
game server: 双端交互,服务端会主动发起请求推送到客户端
app server: 介于web server和game server之间

web server和game server区别:
a. 会话的存在形式:
   web项目里经常用内存数据库保存,比如redis,memcache,mysql
   game server: 一般存放在进程内存中
b. 数据走向和交互频率
	web 单向, 只能客户端主动向服务端发起
	game server: 双端交互, 交互频率很高
c. 通信协议
	web http, https
	game server: 私有化协议, 安全因素考虑

6. firefly框架
底层基于twisted框架  -- django,flask, tornado, sanic...
架构:
client: 游戏客户端
proxy|net: 代理层  --  没有任何游戏或业务逻辑
	收到客户端消息,对其进行解包, 解密,  合法消息转发后端;
	负责最终推送服务端的消息到客户端(消息打包,加密)

gate: 网关层|大厅层    --- 根据消息ID(类型)进行分发
	收到的proxy消息根据类型进行分发到下一层不同的游戏节点

game: (csmj, gdmj...)  游戏节点
	具体游戏消息处理, 比如加入桌子,吃,碰

master: 管理节点
	管理所有节点的生存


单点故障: 一个服务或者一个节点如果出现了故障,所有依赖于该类型服务的其它人都会无法正常工作,此时该服务即为单点


7. 产品需求文档
麻将基本胡:  4(个数)*3(顺子或者刻字) + 1(个数)*2(将牌)


8. 日志系统
调试程序的两种方式:
断点/debug   --- 傻瓜化, 无法跟踪偶现bug, 线上问题无法跟踪
日志    ---- 使用比较麻烦, 主动性(思考在哪里打日志,输出什么东西,埋点) 
print 控制台看日志方便  -- 本身确实文件信息(哪个文件,哪一行,哪个函数)
		注意事项:
			最好日志比较独特,不要全部都是"aaaaaaaaaaa...", 日志内容要让自己快速定位
logging模块:
	日志输出到指定的文件中

cat命令尽量不要使用
传统日志模块: 
	单个日志文件很大,从程序启动后所有日志可能都在一个文件里

自定义日志模块:
	需求:
	日志根据大小进行文件自动切分,比如30M一个文件
	根据日期自动切分,比如每天一个日志文件  proxy_2019-09-25.log, proxy_2019-09-26.log
	把print功能集成到debug级别中
	方便预警,把所有的错误日志冗余输出到特定的错误日志文件中,专门的监控程序对错误日志文件进行监控

所有的静态信息(和环境有关)都不应该在代码中出现, 所有配置信息都应该抽取到特定的配置文件或者数据库中

日志造成的服务器隐患: 日志过多导致磁盘空间不够,服务宕机


9. 如何快速理解一个模块文件
代码较多的文件:
	第一步先看文件最外层有什么东西, 比如有几个类, 全局代码大体干了些什么
	然后根据需求再去看具体的类或者方法的细节

10. 如何理解一个复杂类
	第一步先看类的构造(初始化)方法, 公有方法

11. 如何理解一个复杂函数
	首先关注函数名和函数输入参数和返回值,注释仅供参考
	快速浏览函数代码,关注函数主要模块做了哪些事,碰到不懂的代码,不要停住,继续往下看,下面模块的代码经常有助于上文代码的理解
	对函数整体有一个宏观认识之后,再回过头揪细节


	